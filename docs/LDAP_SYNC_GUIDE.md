# üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Active Directory

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ Active Directory. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª—è—Ç—å –∏–º–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ò—Å–∫–ª—é—á–∞—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä—ã –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
- ‚úÖ –ò—Å–∫–ª—é—á–∞—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ UI

### –®–∞–≥ 1: –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **LDAP / Active Directory**
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ **–∏–∫–æ–Ω–∫—É —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ ‚öôÔ∏è**
4. –í–∫–ª—é—á–∏—Ç–µ **"–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è"**
5. –í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª:
   - –ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
   - –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
   - **–ö–∞–∂–¥—ã–π —á–∞—Å** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - –ö–∞–∂–¥—ã–µ 2 —á–∞—Å–∞
   - –ö–∞–∂–¥—ã–µ 4 —á–∞—Å–∞
   - –ö–∞–∂–¥—ã–µ 8 —á–∞—Å–æ–≤
   - –ö–∞–∂–¥—ã–π –¥–µ–Ω—å

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ cron job

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ cron job –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

#### –î–ª—è Linux/Unix:

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ crontab
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É (–∫–∞–∂–¥—ã–π —á–∞—Å):
0 * * * * /path/to/scripts/ldap-sync-cron.sh >> /var/log/ldap-sync.log 2>&1

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ curl:
0 * * * * curl -H "Authorization: Bearer YOUR_CRON_SECRET" https://yourapp.com/api/cron/ldap-sync
```

#### –î–ª—è Windows (Task Scheduler):

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Task Scheduler** (–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞–Ω–∏–π)
2. –°–æ–∑–¥–∞–π—Ç–µ **–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É**
3. **–¢—Ä–∏–≥–≥–µ—Ä**: –ü–æ–≤—Ç–æ—Ä—è—Ç—å –∫–∞–∂–¥—ã–π —á–∞—Å
4. **–î–µ–π—Å—Ç–≤–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
   - –ü—Ä–æ–≥—Ä–∞–º–º–∞: `C:\ServiceDesk\scripts\ldap-sync-cron.bat`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∑–∞–¥–∞—á—É

–ò–ª–∏ —á–µ—Ä–µ–∑ PowerShell:

```powershell
# –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
$action = New-ScheduledTaskAction -Execute "C:\ServiceDesk\scripts\ldap-sync-cron.bat"
$trigger = New-ScheduledTaskTrigger -Once -At (Get-Date) -RepetitionInterval (New-TimeSpan -Hours 1)
Register-ScheduledTask -TaskName "LDAP Sync" -Action $action -Trigger $trigger
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è cron endpoint
CRON_SECRET=your-super-secret-cron-key-12345
```

## –†—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **LDAP / Active Directory**
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ **‚ãÆ** (—Ç—Ä–∏ —Ç–æ—á–∫–∏)
3. –í—ã–±–µ—Ä–∏—Ç–µ **"–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å"**
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
5. –£–≤–∏–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç: "–ù–∞–π–¥–µ–Ω–æ: X, –°–æ–∑–¥–∞–Ω–æ: Y, –û–±–Ω–æ–≤–ª–µ–Ω–æ: Z"

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç:

### ‚ùå –ö–æ–º–ø—å—é—Ç–µ—Ä—ã
- –í—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ `$`
- –ü—Ä–∏–º–µ—Ä: `DESKTOP-ABC123$`, `SERVER01$`
- **–î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**: –≤ —Ñ–∏–ª—å—Ç—Ä–µ LDAP + –≤ –∫–æ–¥–µ

### ‚ùå –°–∏—Å—Ç–µ–º–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
- `krbtgt` - Kerberos Ticket Granting Ticket
- `Guest` - –ì–æ—Å—Ç–µ–≤–∞—è —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å
- `DefaultAccount` - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç

### ‚ùå –û—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –ê–∫–∫–∞—É–Ω—Ç—ã —Å —Ñ–ª–∞–≥–æ–º `userAccountControl:1.2.840.113556.1.4.803:=2`

### ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`objectClass=user`, `objectCategory=person`)
- –° –≤–∞–ª–∏–¥–Ω—ã–º `sAMAccountName`
- –ë–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–∞–∫–∂–µ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ:
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –∏–∑ Active Directory
- ‚ùå –û—Ç–∫–ª—é—á–µ–Ω—ã –≤ Active Directory
- ‚ùå –ë–æ–ª—å—à–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ñ–∏–ª—å—Ç—Ä—É –ø–æ–∏—Å–∫–∞

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ AD
2. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ –ë–î (—Ç–æ–ª—å–∫–æ LDAP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö `password = ""`)
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ AD ‚Üí `isActive = false`
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–Ω–æ–≤–∞ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ AD ‚Üí `isActive = true` (—Ä–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è)

**–í–∞–∂–Ω–æ:** –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Å –ø–∞—Ä–æ–ª–µ–º) –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

## API Endpoints

### –†—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```http
POST /api/ldap/{configId}/sync
Authorization: Bearer {session_token}

Response:
{
  "success": true,
  "usersFound": 405,
  "usersCreated": 15,
  "usersUpdated": 390,
  "usersDeactivated": 5,
  "users": [...] // –ü–µ—Ä–≤—ã–µ 10 –¥–ª—è –ø—Ä–µ–≤—å—é
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (cron)
```http
GET /api/cron/ldap-sync
Authorization: Bearer {CRON_SECRET}

Response:
{
  "success": true,
  "totalConfigs": 2,
  "results": [
    {
      "configId": "xxx",
      "configName": "Corporate AD",
      "success": true,
      "usersFound": 627,
      "usersCreated": 5,
      "usersUpdated": 622
    }
  ]
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–õ–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞:

```
[LDAP Sync] Starting sync for config: Corporate AD
[LDAP Sync] Bind successful, searching for users...
[LDAP Sync] Search base: DC=company,DC=local
[LDAP Sync] Search filter: (&(objectClass=user)(objectCategory=person)...)
[LDAP Sync] Found user entry: CN=Ivanov Ivan,OU=Users,DC=company,DC=local
[LDAP Sync] User attributes: { sAMAccountName: 'ivanov', mail: 'ivanov@company.local', ... }
[LDAP Sync] Added user: Ivanov Ivan (ivanov@company.local)
[LDAP Sync] Skipping computer account: SERVER01$
[LDAP Sync] Skipping system account: krbtgt
[LDAP Sync] Search completed. Found 627 users
[LDAP Sync] Completed. Created: 15, Updated: 612
```

### Audit Logs

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `audit_logs`:
- –ö—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- –ö–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞–Ω–æ/–æ–±–Ω–æ–≤–ª–µ–Ω–æ

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞**: Cron job –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ cron job –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f /var/log/ldap-sync.log`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `CRON_SECRET` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.env`

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞—Ö–æ–¥–∏—Ç—Å—è 0 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `userSearchBase` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `userSearchFilter`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∫–æ–º–ø—å—é—Ç–µ—Ä—ã

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä:
   ```
   (&(objectClass=user)(objectCategory=person)(!(objectClass=computer))(!(userAccountControl:1.2.840.113556.1.4.803:=2)))
   ```
3. –°–∏—Å—Ç–µ–º–∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `sAMAccountName` –Ω–∞ `$` –≤ –∫–æ–Ω—Ü–µ

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è > 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π `userSearchBase`:
   - –í–º–µ—Å—Ç–æ `DC=company,DC=local`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `OU=Employees,DC=company,DC=local`
2. –£–º–µ–Ω—å—à–∏—Ç–µ `sizeLimit` –≤ –∫–æ–¥–µ
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä –ø–æ OU –≤ `userSearchFilter`

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**: ~1-2 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–¢–∞–π–º–∞—É—Ç**: 30 —Å–µ–∫—É–Ω–¥
- **–ú–∞–∫—Å–∏–º—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: 500 –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**: –ü–æ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **CRON_SECRET**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ –≤ production
2. **–°–µ–∫—Ä–µ—Ç–Ω—ã–π endpoint**: `/api/cron/ldap-sync` –∑–∞—â–∏—â–µ–Ω Bearer —Ç–æ–∫–µ–Ω–æ–º
3. **–õ–æ–≥–∏**: –ù–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –ø–∞—Ä–æ–ª–∏
4. **RLS**: –ö–∞–∂–¥–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ —Å–≤–æ–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

## Best Practices

1. **–ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1-4 —á–∞—Å–∞
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
3. **–õ–æ–≥–∏**: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–π –≥—Ä—É–ø–ø–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–µ–ª–∞–π—Ç–µ backup –ë–î –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–π —á–∞—Å (Linux)
```bash
0 * * * * curl -H "Authorization: Bearer my-secret-key" https://onpoints.it/api/cron/ldap-sync
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ (Windows PowerShell)
```powershell
$action = New-ScheduledTaskAction -Execute "powershell.exe" `
  -Argument "-Command `"Invoke-WebRequest -Uri 'http://localhost:3000/api/cron/ldap-sync' -Headers @{'Authorization'='Bearer my-secret-key'}`""

$trigger = New-ScheduledTaskTrigger -Once -At (Get-Date) -RepetitionInterval (New-TimeSpan -Hours 6)

Register-ScheduledTask -TaskName "LDAP Sync Every 6 Hours" -Action $action -Trigger $trigger -RunLevel Highest
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
```bash
# –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ü—è—Ç–Ω–∏—Ü–∞, 9:00-18:00, –∫–∞–∂–¥—ã–π —á–∞—Å
0 9-18 * * 1-5 curl -H "Authorization: Bearer my-secret-key" https://onpoints.it/api/cron/ldap-sync
```

---

**–ì–æ—Ç–æ–≤–æ!** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞! üéâ

